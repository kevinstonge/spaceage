(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{176:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(23),i=n.n(r),s=(n(63),n(18)),u=n(13),o=n(3),l={getAPISwagger:"GET_API_SWAGGER",setActiveAPI:"SET_ACTIVE_API",getAPIEndpoints:"GET_API_ENDPOINTS",setActiveEndpoint:"SET_ACTIVE_ENDPOINT",getEndpointParameters:"GET_API_PARAMETERS",setParams:"SET_URL_PARAMETERS",setQuery:"SET_QUERY",setQueryResults:"SET_QUERY_RESULTS"},p={API:{activeAPI:null,APISwagger:null,APIEndpoints:null,activeEndpoints:{},EndpointParameters:null,URLParameters:null,queries:{},queryResults:{}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.getAPISwagger:return Object(o.a)(Object(o.a)({},e),{},{APISwagger:t.payload});case l.setActiveAPI:return Object(o.a)(Object(o.a)({},e),{},{activeAPI:t.payload});case l.getAPIEndpoints:return Object(o.a)(Object(o.a)({},e),{},{APIEndpoints:Object(o.a)(Object(o.a)({},e.APIEndpoints),{},Object(u.a)({},t.payload.api,t.payload.parameters))});case l.setActiveEndpoint:return Object(o.a)(Object(o.a)({},e),{},{activeEndpoints:Object(o.a)(Object(o.a)({},e.activeEndpoints),{},Object(u.a)({},t.payload.apiName,t.payload.endpoint))});case l.getEndpointParameters:return Object(o.a)(Object(o.a)({},e),{},{EndpointParameters:Object(u.a)({},t.payload.endpoint,t.payload.parameters)});case l.setParams:return Object(o.a)(Object(o.a)({},e),{},{URLParameters:t.payload});case l.setQuery:return Object(o.a)(Object(o.a)({},e),{},{queries:Object(o.a)(Object(o.a)({},e.queries),{},Object(u.a)({},t.payload.path,t.payload.data))});case l.setQueryResults:return Object(o.a)(Object(o.a)({},e),{},{queryResults:Object(o.a)(Object(o.a)({},e.queryResults),{},Object(u.a)({},t.payload.queryPath,{queryPath:t.payload.queryPath,query:t.payload.query,queryResult:t.payload.queryResult,status:t.payload.status||""}))});default:return e}},j=Object(s.a)({API:d}),b=n(5),O=n(14),y=(n(69),n(6)),h=(n(70),n(2)),f=function(){return Object(h.jsxs)("header",{children:[Object(h.jsxs)("div",{className:"left",children:[Object(h.jsx)("img",{src:"".concat("","/logo70.png"),alt:"cute purple rocket ship"}),Object(h.jsx)("h1",{children:"spaceage"})]}),Object(h.jsx)("div",{className:"right",children:Object(h.jsx)("p",{children:"right"})})]})},v={APIActions:l},A=n(57),P=n.n(A).a.create({baseURL:"https://spaceage.kevinstonge.com/api"});function g(e){var t=Object(b.b)(),n=Object(b.c)((function(e){return e.API.APISwagger})),c=Object(b.c)((function(e){return e.API.activeAPI})),r=Object(b.c)((function(e){return e.API.URLParameters})),i=Object(y.d)();return Object(a.useEffect)((function(){P.get("/data/apis").then((function(e){t({type:v.APIActions.getAPISwagger,payload:e.data})}))}),[t]),Object(a.useEffect)((function(){if(n&&n.paths)if(r.api){var e=Object.keys(n.paths).filter((function(e){return e.split("/")[1]===r.api}));e.length>0?t({type:v.APIActions.setActiveAPI,payload:e[0].split("/")[1]}):(t({type:v.APIActions.setActiveAPI,payload:null}),i.push("/"))}else t({type:v.APIActions.setActiveAPI,payload:null})}),[r,n,i,t]),Object(h.jsx)(h.Fragment,{children:(null===n||void 0===n?void 0:n.paths)&&Object(h.jsx)("nav",{children:Array.from(new Set(Object.keys(n.paths).map((function(e){return e.split("/")[1]})))).map((function(e,t){return Object(h.jsx)(O.b,{to:"/".concat(e),className:"nav ".concat(c&&c.Name===e?"active":"inactive"),children:e},"apiItem-".concat(t))}))})})}function m(){var e=Object(b.c)((function(e){return e.API.activeAPI})),t=Object(b.c)((function(e){return e.API.APISwagger})),n=Object(b.c)((function(e){return e.API.activeEndpoints})),c=Object(b.c)((function(e){return e.API.URLParameters})),r=Object(b.b)(),i=Object(y.d)();return Object(a.useEffect)((function(){if(c&&t&&e){var a=Object.keys(t.paths).filter((function(e){return e.split("/")[1]===c.api&&(e.split("/").slice(2,-1).join(":").replace("{id}","id")===c.endpoint||c.endpoint===c.api)}));!(a.length>0)||n&&n.hasOwnProperty(c.api)||r({type:v.APIActions.setActiveEndpoint,payload:{apiName:e,endpoint:c.endpoint}}),a.length>0&&n&&n.hasOwnProperty(c.api)&&n[c.api]!==c.endpoint&&r({type:v.APIActions.setActiveEndpoint,payload:{apiName:e,endpoint:c.endpoint}}),c&&n&&(!c.hasOwnProperty("endpoint")||void 0===c.endpoint)&&n.hasOwnProperty(c.api)&&i.push("/".concat(c.api,"/").concat(n[c.api]))}}),[c,r,t,e,n,i]),Object(h.jsx)("nav",{children:(null===c||void 0===c?void 0:c.api)&&t&&Object.keys(t.paths).map((function(t,n){var a=t.split("/"),r=""===a[2]?e:a.slice(2,-1).join(":").replace(/[{}]/g,"");return a[1]===e?Object(h.jsx)(O.b,{to:"/".concat(e,"/").concat(r),className:"nav ".concat(c.endpoint===r?"active":"inactive"),children:r},"endpoint-".concat(r,"-").concat(n)):null}))})}var I=n(16),E=n(21);function x(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.API.APISwagger})),n=Object(b.c)((function(e){return e.API.EndpointParameters})),c=Object(b.c)((function(e){return e.API.URLParameters})),r=Object(b.c)((function(e){return e.API.queries})),i=c?"".concat(c.api,"/").concat(c.endpoint):"",s=(null===c||void 0===c?void 0:c.api)&&(null===c||void 0===c?void 0:c.endpoint)?c.api===c.endpoint?c.api:"".concat(c.api,"/").concat(c.endpoint.replace(":","/").replace("id","{id}")):void 0;Object(a.useEffect)((function(){if((null===c||void 0===c?void 0:c.endpoint)&&(null===c||void 0===c?void 0:c.api)&&t){var n,a=["search"],r=t.paths["/".concat(s,"/")],i=[];(null===r||void 0===r||null===(n=r.get)||void 0===n?void 0:n.parameters)&&r.get.parameters.length>0&&i.push.apply(i,Object(E.a)(r.get.parameters)),(null===r||void 0===r?void 0:r.parameters)&&r.parameters.length>0&&i.push.apply(i,Object(E.a)(r.parameters));var u=i.filter((function(e){return a.includes(e.name)})),o=i.filter((function(e){var t=0;return u.forEach((function(n){n.name===e.name&&t++})),!(t>0)})),l=[].concat(Object(E.a)(u),Object(E.a)(o));e({type:v.APIActions.getEndpointParameters,payload:{endpoint:s,parameters:l}}),0===l.length&&r.get&&(e({type:v.APIActions.setQueryResults,payload:{queryPath:s,query:s,queryResult:[],status:"searching"}}),P.get("/data/".concat(s,"/")).then((function(t){t.data&&e({type:v.APIActions.setQueryResults,payload:{queryPath:s,query:s,queryResult:t.data,status:"success"}})})))}}),[c,s,t,e]),Object(a.useEffect)((function(){""===i||i.includes("undefined")||(!!r&&i in r||e({type:v.APIActions.setQuery,payload:{path:i,data:null}}))}),[r,i,e]),Object(a.useEffect)((function(){r&&null===r[i]&&n&&n[s]&&n[s].length>0&&e({type:v.APIActions.setQuery,payload:{path:i,data:Object(u.a)({},n[s][0].name,"")}})}),[r,i,n,s,e]);return Object(h.jsx)(h.Fragment,{children:r&&r[i]&&n&&n[s]&&Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(){var t=Object.entries(r[i]).filter((function(e){return""!==e[1]})).map((function(e){return"".concat(e[0],"=").concat(e[1])})).sort().join("&"),n=c.api===c.endpoint?c.api:"".concat(c.api,"/").concat(c.endpoint);e({type:v.APIActions.setQueryResults,payload:{queryPath:i,query:t,queryResult:[],status:"searching"}}),P.get("/data/".concat(n,"/?").concat(t)).then((function(n){n.data&&e({type:v.APIActions.setQueryResults,payload:{queryPath:i,query:t,queryResult:n.data,status:"success"}})}))}()},children:[Object.entries(r[i]).map((function(t,a){var c=Object(I.a)(t,2),u=c[0],o=c[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)("select",{value:u,id:"".concat(u,"-select"),onChange:function(t){return function(t){var n=t.target.id.substring(0,t.target.id.length-7),a=t.target.value,c=r[i];delete c[n],c[a]="",e({type:v.APIActions.setQuery,payload:{path:i,data:c}})}(t)},children:n[s]&&n[s].length>0&&n[s].map((function(e,t){var n=Object.keys(r[i]).includes(e.name)&&u!==e.name;return Object(h.jsx)("option",{disabled:n,id:"".concat(e.name,"-option"),children:e.name},"param-".concat(t))}))}),Object(h.jsx)("input",{type:"text",value:o,onChange:function(t){return function(t){var n=r[i];n[t.target.id.substring(0,t.target.id.length-6)]=t.target.value,e({type:v.APIActions.setQuery,payload:{path:i,data:n}})}(t)},id:"".concat(u,"-input")}),a>0&&Object(h.jsx)("button",{id:"".concat(u,"-remove"),onClick:function(t){t.preventDefault(),function(t){var n=t.target.id.substring(0,t.target.id.length-7),a=r[i];delete a[n],e({type:v.APIActions.setQuery,payload:{path:i,data:a}})}(t)},children:"-"})]},"queryItem-".concat(a))})),Object.keys(r[i]).length<n[s].length&&Object(h.jsx)("p",{children:Object(h.jsx)("button",{onClick:function(t){t.preventDefault(),function(){var t=n[s].filter((function(e){return!Object.keys(r[i]).includes(e.name)}))[0].name;e({type:v.APIActions.setQuery,payload:{path:i,data:Object(o.a)(Object(o.a)({},r[i]),{},Object(u.a)({},t,""))}})}()},children:"+"})}),Object(h.jsx)("p",{children:Object(h.jsx)("button",{type:"submit",children:"Search"})})]})})}var R=n(25),q=n.n(R);function S(e){var t=e.property,n=e.value;if(null===n||0===n.length)return null;if("object"===typeof n)return Object(h.jsx)("div",{className:"resultItem",children:Object(h.jsxs)("details",{children:[Object(h.jsx)("summary",{children:Object(h.jsx)("p",{children:Object(h.jsxs)("span",{className:"label",children:[t,n.name&&" (".concat(n.name,")"),!n.name&&n.title&&" (".concat(n.title,")")]})})}),Object.entries(n).map((function(e,t){var n=Object(I.a)(e,2),a=n[0],c=n[1];return null===c?null:Object(h.jsx)(S,{property:a,value:c},"".concat(a,"-").concat(t))}))]})});var a=JSON.stringify(n).replace(/^"(.+)"$/,"$1");return Object(h.jsx)("div",{className:"resultItem",children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{className:"label",children:t}),": ",q.a.isURL(a)?Object(h.jsx)("a",{href:a,children:a}):a]})})}n(55);function _(e){var t={url:null};return Object(h.jsxs)("div",{className:"resultCard",children:[Object(h.jsx)("div",{className:"left",children:Object.entries(e.data).map((function(e,n){var a=Object(I.a)(e,2),c=a[0],r=a[1];return"image"===c&&(null===r||void 0===r?void 0:r.length)>0?(t.url=r,null):null===r||0===r.length?null:Object(h.jsx)(S,{property:c,value:r},"".concat(c,"-").concat(n))}))}),null!==t.url&&q.a.isURL(t.url)&&Object(h.jsx)("div",{className:"right",children:Object(h.jsx)("a",{href:t.url,target:"new",children:Object(h.jsx)("img",{src:t.url,alt:""})})})]})}function N(){var e,t=Object(b.c)((function(e){return e.API.URLParameters})),n=t?"".concat(t.api,"/").concat(t.endpoint):"",a=Object(b.c)((function(e){return e.API.queryResults}));return Object(h.jsxs)(h.Fragment,{children:[a&&a[n]&&(null===(e=a[n].queryResult)||void 0===e?void 0:e.results)&&Object(h.jsx)("div",{className:"queryResults",children:a[n].queryResult.results.map((function(e){return Object(h.jsx)(_,{data:e},e.id)}))}),(!a||!a[n])&&Object(h.jsx)("p",{children:"no data"})]})}var w=function(){var e=Object(b.b)(),t=Object(y.e)("/:api?/:endpoint?/:query?");return Object(a.useEffect)((function(){e({type:v.APIActions.setParams,payload:t.params})}),[t,e]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{}),Object(h.jsx)(g,{}),Object(h.jsx)(m,{}),Object(h.jsx)(x,{}),Object(h.jsx)(N,{})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Q=n(58),L=n.n(Q),U=Object(s.b)(L()()),k=Object(s.c)(j,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),U);i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(b.a,{store:k,children:Object(h.jsx)(O.a,{children:Object(h.jsx)(w,{})})})}),document.getElementById("root")),T()},55:function(e,t,n){},63:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){}},[[176,1,2]]]);
//# sourceMappingURL=main.99c1804b.chunk.js.map