(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{176:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(23),i=n.n(r),s=(n(63),n(18)),u=n(13),o=n(3),l={getAPISwagger:"GET_API_SWAGGER",setActiveAPI:"SET_ACTIVE_API",getAPIEndpoints:"GET_API_ENDPOINTS",setActiveEndpoint:"SET_ACTIVE_ENDPOINT",getEndpointParameters:"GET_API_PARAMETERS",setParams:"SET_URL_PARAMETERS",setQuery:"SET_QUERY",setQueryResults:"SET_QUERY_RESULTS"},p={API:{activeAPI:null,APISwagger:null,APIEndpoints:null,activeEndpoints:{},EndpointParameters:null,URLParameters:null,queries:{},queryResults:{}}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l.getAPISwagger:return Object(o.a)(Object(o.a)({},t),{},{APISwagger:e.payload});case l.setActiveAPI:return Object(o.a)(Object(o.a)({},t),{},{activeAPI:e.payload});case l.getAPIEndpoints:return Object(o.a)(Object(o.a)({},t),{},{APIEndpoints:Object(o.a)(Object(o.a)({},t.APIEndpoints),{},Object(u.a)({},e.payload.api,e.payload.parameters))});case l.setActiveEndpoint:return Object(o.a)(Object(o.a)({},t),{},{activeEndpoints:Object(o.a)(Object(o.a)({},t.activeEndpoints),{},Object(u.a)({},e.payload.apiName,e.payload.endpoint))});case l.getEndpointParameters:return Object(o.a)(Object(o.a)({},t),{},{EndpointParameters:Object(u.a)({},e.payload.endpoint,e.payload.parameters)});case l.setParams:return Object(o.a)(Object(o.a)({},t),{},{URLParameters:e.payload});case l.setQuery:return Object(o.a)(Object(o.a)({},t),{},{queries:Object(o.a)(Object(o.a)({},t.queries),{},Object(u.a)({},e.payload.path,e.payload.data))});case l.setQueryResults:return Object(o.a)(Object(o.a)({},t),{},{queryResults:Object(o.a)(Object(o.a)({},t.queryResults),{},Object(u.a)({},e.payload.queryPath,{queryPath:e.payload.queryPath,query:e.payload.query,queryResult:e.payload.queryResult,status:e.payload.status||""}))});default:return t}},j=Object(s.a)({API:d}),b=n(5),O=n(14),y=(n(69),n(6)),h=(n(70),n(2)),f=function(){return Object(h.jsxs)("header",{children:[Object(h.jsxs)("div",{className:"left",children:[Object(h.jsx)("img",{src:"".concat("","/logo70.png"),alt:"cute purple rocket ship"}),Object(h.jsx)("h1",{children:"spaceage"})]}),Object(h.jsx)("div",{className:"right",children:Object(h.jsx)("p",{children:"right"})})]})},v={APIActions:l},A=n(57),P=n.n(A).a.create({baseURL:"https://spaceage.kevinstonge.com/api"});function g(t){var e=Object(b.b)(),n=Object(b.c)((function(t){return t.API.APISwagger})),c=Object(b.c)((function(t){return t.API.activeAPI})),r=Object(b.c)((function(t){return t.API.URLParameters})),i=Object(y.d)();return Object(a.useEffect)((function(){P.get("/data/apis").then((function(t){e({type:v.APIActions.getAPISwagger,payload:t.data})}))}),[e]),Object(a.useEffect)((function(){if(n&&n.paths)if(r.api){var t=Object.keys(n.paths).filter((function(t){return t.split("/")[1]===r.api}));t.length>0?e({type:v.APIActions.setActiveAPI,payload:t[0].split("/")[1]}):(e({type:v.APIActions.setActiveAPI,payload:null}),i.push("/"))}else e({type:v.APIActions.setActiveAPI,payload:null})}),[r,n,i,e]),Object(h.jsx)(h.Fragment,{children:(null===n||void 0===n?void 0:n.paths)&&Object(h.jsx)("nav",{children:Array.from(new Set(Object.keys(n.paths).map((function(t){return t.split("/")[1]})))).map((function(t,e){return Object(h.jsx)(O.b,{to:"/".concat(t),className:"nav ".concat(c&&c.Name===t?"active":"inactive"),children:t},"apiItem-".concat(e))}))})})}function m(){var t=Object(b.c)((function(t){return t.API.activeAPI})),e=Object(b.c)((function(t){return t.API.APISwagger})),n=Object(b.c)((function(t){return t.API.activeEndpoints})),c=Object(b.c)((function(t){return t.API.URLParameters})),r=Object(b.b)(),i=Object(y.d)();return Object(a.useEffect)((function(){if(c&&e&&t){var a=Object.keys(e.paths).filter((function(t){return t.split("/")[1]===c.api&&(t.split("/").slice(2,-1).join(":").replace("{id}","id")===c.endpoint||c.endpoint===c.api)}));!(a.length>0)||n&&n.hasOwnProperty(c.api)||r({type:v.APIActions.setActiveEndpoint,payload:{apiName:t,endpoint:c.endpoint}}),a.length>0&&n&&n.hasOwnProperty(c.api)&&n[c.api]!==c.endpoint&&r({type:v.APIActions.setActiveEndpoint,payload:{apiName:t,endpoint:c.endpoint}}),c&&n&&(!c.hasOwnProperty("endpoint")||void 0===c.endpoint)&&n.hasOwnProperty(c.api)&&i.push("/".concat(c.api,"/").concat(n[c.api]))}}),[c,r,e,t,n,i]),Object(h.jsx)("nav",{children:(null===c||void 0===c?void 0:c.api)&&e&&Object.keys(e.paths).map((function(e,n){var a=e.split("/"),r=""===a[2]?t:a.slice(2,-1).join(":").replace(/[{}]/g,"");return a[1]===t?Object(h.jsx)(O.b,{to:"/".concat(t,"/").concat(r),className:"nav ".concat(c.endpoint===r?"active":"inactive"),children:r},"endpoint-".concat(r,"-").concat(n)):null}))})}var I=n(16),E=n(21);function x(){var t=Object(b.b)(),e=Object(b.c)((function(t){return t.API.APISwagger})),n=Object(b.c)((function(t){return t.API.EndpointParameters})),c=Object(b.c)((function(t){return t.API.URLParameters})),r=Object(b.c)((function(t){return t.API.queries})),i=c?"".concat(c.api,"/").concat(c.endpoint):"",s=(null===c||void 0===c?void 0:c.api)&&(null===c||void 0===c?void 0:c.endpoint)?c.api===c.endpoint?c.api:"".concat(c.api,"/").concat(c.endpoint.replace(":","/").replace("id","{id}")):void 0;Object(a.useEffect)((function(){if((null===c||void 0===c?void 0:c.endpoint)&&(null===c||void 0===c?void 0:c.api)&&e){var n,a=["search"],r=e.paths["/".concat(s,"/")],i=[];(null===r||void 0===r||null===(n=r.get)||void 0===n?void 0:n.parameters)&&r.get.parameters.length>0&&i.push.apply(i,Object(E.a)(r.get.parameters)),(null===r||void 0===r?void 0:r.parameters)&&r.parameters.length>0&&i.push.apply(i,Object(E.a)(r.parameters));var u=i.filter((function(t){return a.includes(t.name)})),o=i.filter((function(t){var e=0;return u.forEach((function(n){n.name===t.name&&e++})),!(e>0)})),l=[].concat(Object(E.a)(u),Object(E.a)(o));t({type:v.APIActions.getEndpointParameters,payload:{endpoint:s,parameters:l}}),0===l.length&&r.get&&(t({type:v.APIActions.setQueryResults,payload:{queryPath:s,query:s,queryResult:[],status:"searching"}}),P.get("/data/".concat(s,"/")).then((function(e){e.data&&t({type:v.APIActions.setQueryResults,payload:{queryPath:s,query:s,queryResult:e.data,status:"success"}})})))}}),[c,s,e,t]),Object(a.useEffect)((function(){""===i||i.includes("undefined")||(!!r&&i in r||t({type:v.APIActions.setQuery,payload:{path:i,data:null}}))}),[r,i,t]),Object(a.useEffect)((function(){r&&null===r[i]&&n&&n[s]&&n[s].length>0&&t({type:v.APIActions.setQuery,payload:{path:i,data:Object(u.a)({},n[s][0].name,"")}})}),[r,i,n,s,t]);return Object(h.jsx)(h.Fragment,{children:r&&r[i]&&n&&n[s]&&Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object.entries(r[i]).filter((function(t){return""!==t[1]})).map((function(t){return"".concat(t[0],"=").concat(t[1])})).sort().join("&"),n=c.api===c.endpoint?c.api:"".concat(c.api,"/").concat(c.endpoint);t({type:v.APIActions.setQueryResults,payload:{queryPath:i,query:e,queryResult:[],status:"searching"}}),P.get("/data/".concat(n,"/?").concat(e)).then((function(n){n.data&&t({type:v.APIActions.setQueryResults,payload:{queryPath:i,query:e,queryResult:n.data,status:"success"}})}))}()},children:[Object.entries(r[i]).map((function(e,a){var c=Object(I.a)(e,2),u=c[0],o=c[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)("select",{value:u,id:"".concat(u,"-select"),onChange:function(e){return function(e){var n=e.target.id.substring(0,e.target.id.length-7),a=e.target.value,c=r[i];delete c[n],c[a]="",t({type:v.APIActions.setQuery,payload:{path:i,data:c}})}(e)},children:n[s]&&n[s].length>0&&n[s].map((function(t,e){var n=Object.keys(r[i]).includes(t.name)&&u!==t.name;return Object(h.jsx)("option",{disabled:n,id:"".concat(t.name,"-option"),children:t.name},"param-".concat(e))}))}),Object(h.jsx)("input",{type:"text",value:o,onChange:function(e){return function(e){var n=r[i];n[e.target.id.substring(0,e.target.id.length-6)]=e.target.value,t({type:v.APIActions.setQuery,payload:{path:i,data:n}})}(e)},id:"".concat(u,"-input")}),a>0&&Object(h.jsx)("button",{type:"button",id:"".concat(u,"-remove"),onClick:function(e){e.preventDefault(),function(e){var n=e.target.id.substring(0,e.target.id.length-7),a=r[i];delete a[n],t({type:v.APIActions.setQuery,payload:{path:i,data:a}})}(e)},children:"-"})]},"queryItem-".concat(a))})),Object.keys(r[i]).length<n[s].length&&Object(h.jsx)("p",{children:Object(h.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),function(){var e=n[s].filter((function(t){return!Object.keys(r[i]).includes(t.name)}))[0].name;t({type:v.APIActions.setQuery,payload:{path:i,data:Object(o.a)(Object(o.a)({},r[i]),{},Object(u.a)({},e,""))}})}()},children:"+"})}),Object(h.jsx)("p",{children:Object(h.jsx)("input",{type:"submit",value:"search"})})]})})}var R=n(25),q=n.n(R);function S(t){var e=t.property,n=t.value;if(null===n||0===n.length)return null;if("object"===typeof n)return Object(h.jsx)("div",{className:"resultItem",children:Object(h.jsxs)("details",{children:[Object(h.jsx)("summary",{children:Object(h.jsx)("p",{children:Object(h.jsxs)("span",{className:"label",children:[e,n.name&&" (".concat(n.name,")"),!n.name&&n.title&&" (".concat(n.title,")")]})})}),Object.entries(n).map((function(t,e){var n=Object(I.a)(t,2),a=n[0],c=n[1];return null===c?null:Object(h.jsx)(S,{property:a,value:c},"".concat(a,"-").concat(e))}))]})});var a=JSON.stringify(n).replace(/^"(.+)"$/,"$1");return Object(h.jsx)("div",{className:"resultItem",children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{className:"label",children:e}),": ",q.a.isURL(a)?Object(h.jsx)("a",{href:a,children:a}):a]})})}n(55);function _(t){var e={url:null};return Object(h.jsxs)("div",{className:"resultCard",children:[Object(h.jsx)("div",{className:"left",children:Object.entries(t.data).map((function(t,n){var a=Object(I.a)(t,2),c=a[0],r=a[1];return"image"===c&&(null===r||void 0===r?void 0:r.length)>0?(e.url=r,null):null===r||0===r.length?null:Object(h.jsx)(S,{property:c,value:r},"".concat(c,"-").concat(n))}))}),null!==e.url&&q.a.isURL(e.url)&&Object(h.jsx)("div",{className:"right",children:Object(h.jsx)("a",{href:e.url,target:"new",children:Object(h.jsx)("img",{src:e.url,alt:""})})})]})}function N(){var t,e=Object(b.c)((function(t){return t.API.URLParameters})),n=e?"".concat(e.api,"/").concat(e.endpoint):"",a=Object(b.c)((function(t){return t.API.queryResults}));return Object(h.jsxs)(h.Fragment,{children:[a&&a[n]&&(null===(t=a[n].queryResult)||void 0===t?void 0:t.results)&&Object(h.jsx)("div",{className:"queryResults",children:a[n].queryResult.results.map((function(t){return Object(h.jsx)(_,{data:t},t.id)}))}),(!a||!a[n])&&Object(h.jsx)("p",{children:"no data"})]})}var w=function(){var t=Object(b.b)(),e=Object(y.e)("/:api?/:endpoint?/:query?");return Object(a.useEffect)((function(){t({type:v.APIActions.setParams,payload:e.params})}),[e,t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{}),Object(h.jsx)(g,{}),Object(h.jsx)(m,{}),Object(h.jsx)(x,{}),Object(h.jsx)(N,{})]})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))},Q=n(58),L=n.n(Q),U=Object(s.b)(L()()),k=Object(s.c)(j,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),U);i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(b.a,{store:k,children:Object(h.jsx)(O.a,{children:Object(h.jsx)(w,{})})})}),document.getElementById("root")),T()},55:function(t,e,n){},63:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){}},[[176,1,2]]]);
//# sourceMappingURL=main.b789a8ef.chunk.js.map