(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{172:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return D}));var a=n(0),c=n.n(a),r=n(23),i=n.n(r),s=(n(63),n(18)),o=n(13),u=n(3),l={getAPISwagger:"GET_API_SWAGGER",setActiveAPI:"SET_ACTIVE_API",getAPIEndpoints:"GET_API_ENDPOINTS",setActiveEndpoint:"SET_ACTIVE_ENDPOINT",getEndpointParameters:"GET_API_PARAMETERS",setParams:"SET_URL_PARAMETERS",setQuery:"SET_QUERY",setQueryResults:"SET_QUERY_RESULTS"},p={API:{activeAPI:null,APISwagger:null,APIEndpoints:null,activeEndpoints:{},EndpointParameters:null,URLParameters:null,queries:{},queryResults:{}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.getAPISwagger:return Object(u.a)(Object(u.a)({},e),{},{APISwagger:t.payload});case l.setActiveAPI:return Object(u.a)(Object(u.a)({},e),{},{activeAPI:t.payload});case l.getAPIEndpoints:return Object(u.a)(Object(u.a)({},e),{},{APIEndpoints:Object(u.a)(Object(u.a)({},e.APIEndpoints),{},Object(o.a)({},t.payload.api,t.payload.parameters))});case l.setActiveEndpoint:return Object(u.a)(Object(u.a)({},e),{},{activeEndpoints:Object(u.a)(Object(u.a)({},e.activeEndpoints),{},Object(o.a)({},t.payload.apiName,t.payload.endpoint))});case l.getEndpointParameters:return Object(u.a)(Object(u.a)({},e),{},{EndpointParameters:Object(o.a)({},t.payload.endpoint,t.payload.parameters)});case l.setParams:return Object(u.a)(Object(u.a)({},e),{},{URLParameters:t.payload});case l.setQuery:return Object(u.a)(Object(u.a)({},e),{},{queries:Object(u.a)(Object(u.a)({},e.queries),{},Object(o.a)({},t.payload.path,t.payload.data))});case l.setQueryResults:return Object(u.a)(Object(u.a)({},e),{},{queryResults:Object(u.a)(Object(u.a)({},e.queryResults),{},Object(o.a)({},t.payload.queryPath,{queryPath:t.payload.queryPath,query:t.payload.query,queryResult:t.payload.queryResult,status:t.payload.status||""}))});default:return e}},j=Object(s.a)({API:d}),b=n(5),O=n(14),h=(n(69),n(6)),y=(n(70),n(2)),f=function(){return Object(y.jsxs)("header",{children:[Object(y.jsxs)("div",{className:"left",children:[Object(y.jsx)("img",{src:"".concat("","/logo70.png"),alt:"cute purple rocket ship"}),Object(y.jsx)("h1",{children:"spaceage"})]}),Object(y.jsx)("div",{className:"right",children:Object(y.jsx)("p",{children:"right"})})]})},v={APIActions:l},g=n(57),A=n.n(g).a.create({baseURL:"https://spaceage.kevinstonge.com/api"});function m(e){var t=Object(b.b)(),n=Object(b.c)((function(e){return e.API.APISwagger})),c=Object(b.c)((function(e){return e.API.activeAPI})),r=Object(b.c)((function(e){return e.API.URLParameters})),i=Object(h.d)();return Object(a.useEffect)((function(){A.get("/data/apis").then((function(e){t({type:v.APIActions.getAPISwagger,payload:e.data})}))}),[t]),Object(a.useEffect)((function(){if(n&&n.paths)if(r.api){var e=Object.keys(n.paths).filter((function(e){return e.split("/")[1]===r.api}));e.length>0?t({type:v.APIActions.setActiveAPI,payload:e[0].split("/")[1]}):(t({type:v.APIActions.setActiveAPI,payload:null}),i.push("/"))}else t({type:v.APIActions.setActiveAPI,payload:null})}),[r,n,i,t]),Object(y.jsx)(y.Fragment,{children:(null===n||void 0===n?void 0:n.paths)&&Object(y.jsx)("nav",{children:Array.from(new Set(Object.keys(n.paths).map((function(e){return e.split("/")[1]})))).map((function(e,t){return Object(y.jsx)(O.b,{to:"/".concat(e),className:"nav ".concat(c&&c.Name===e?"active":"inactive"),children:e},"apiItem-".concat(t))}))})})}function P(){var e=Object(b.c)((function(e){return e.API.activeAPI})),t=Object(b.c)((function(e){return e.API.APISwagger})),n=Object(b.c)((function(e){return e.API.activeEndpoints})),c=Object(b.c)((function(e){return e.API.URLParameters})),r=Object(b.b)(),i=Object(h.d)();return Object(a.useEffect)((function(){if(c&&t&&e){var a=Object.keys(t.paths).filter((function(e){return e.split("/")[1]===c.api&&(e.split("/").slice(2,-1).join(":").replace("{id}","id")===c.endpoint||c.endpoint===c.api)}));!(a.length>0)||n&&n.hasOwnProperty(c.api)||r({type:v.APIActions.setActiveEndpoint,payload:{apiName:e,endpoint:c.endpoint}}),a.length>0&&n&&n.hasOwnProperty(c.api)&&n[c.api]!==c.endpoint&&r({type:v.APIActions.setActiveEndpoint,payload:{apiName:e,endpoint:c.endpoint}}),c&&n&&(!c.hasOwnProperty("endpoint")||void 0===c.endpoint)&&n.hasOwnProperty(c.api)&&i.push("/".concat(c.api,"/").concat(n[c.api]))}}),[c,r,t,e,n,i]),Object(y.jsx)("nav",{children:(null===c||void 0===c?void 0:c.api)&&t&&Object.keys(t.paths).map((function(t,n){var a=t.split("/"),r=""===a[2]?e:a.slice(2,-1).join(":").replace(/[{}]/g,"");return a[1]===e?Object(y.jsx)(O.b,{to:"/".concat(e,"/").concat(r),className:"nav ".concat(c.endpoint===r?"active":"inactive"),children:r},"endpoint-".concat(r,"-").concat(n)):null}))})}var I=n(16),x=n(21),E=function(e,t,n){D.dispatch({type:v.APIActions.setQueryResults,payload:{queryPath:e,query:n,queryResult:[],status:"searching"}}),A.get("/data/".concat(t,"/?").concat(n)).then((function(t){t.data&&D.dispatch({type:v.APIActions.setQueryResults,payload:{queryPath:e,query:n,queryResult:t.data,status:"success"}})})).catch((function(t){D.dispatch({type:v.APIActions.setQueryResults,payload:{queryPath:e,query:n,queryResult:[],status:"unable to retrieve data from the server, try again later"}})}))};function R(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.API.APISwagger})),n=Object(b.c)((function(e){return e.API.EndpointParameters})),c=Object(b.c)((function(e){return e.API.URLParameters})),r=Object(b.c)((function(e){return e.API.queries})),i=c?"".concat(c.api,"/").concat(c.endpoint):"",s=(null===c||void 0===c?void 0:c.api)&&(null===c||void 0===c?void 0:c.endpoint)?c.api===c.endpoint?c.api:"".concat(c.api,"/").concat(c.endpoint.replace(":","/").replace("id","{id}")):void 0,l=c.api&&c.endpoint?c.api===c.endpoint?c.api:"".concat(c.api,"/").concat(c.endpoint):"";Object(a.useEffect)((function(){if((null===c||void 0===c?void 0:c.endpoint)&&(null===c||void 0===c?void 0:c.api)&&t){var n,a=["search"],r=t.paths["/".concat(s,"/")],o=[];(null===r||void 0===r||null===(n=r.get)||void 0===n?void 0:n.parameters)&&r.get.parameters.length>0&&o.push.apply(o,Object(x.a)(r.get.parameters)),(null===r||void 0===r?void 0:r.parameters)&&r.parameters.length>0&&o.push.apply(o,Object(x.a)(r.parameters));var u=o.filter((function(e){return a.includes(e.name)})),p=o.filter((function(e){var t=0;return u.forEach((function(n){n.name===e.name&&t++})),!(t>0)})),d=[].concat(Object(x.a)(u),Object(x.a)(p));e({type:v.APIActions.getEndpointParameters,payload:{endpoint:s,parameters:d}}),0===d.length&&r.get&&E(s,s,""),c.query&&t.paths["/".concat(s,"/")]&&(console.log(i),E(s,l,c.query.replace("?","")))}}),[c,s,t,l,i,e]),Object(a.useEffect)((function(){""===i||i.includes("undefined")||(!!r&&i in r||e({type:v.APIActions.setQuery,payload:{path:i,data:null}}))}),[r,i,e]),Object(a.useEffect)((function(){r&&null===r[i]&&n&&n[s]&&n[s].length>0&&e({type:v.APIActions.setQuery,payload:{path:i,data:Object(o.a)({},n[s][0].name,"")}})}),[r,i,n,s,e]);return Object(y.jsx)(y.Fragment,{children:r&&r[i]&&n&&n[s]&&Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object.entries(r[i]).filter((function(e){return""!==e[1]})).map((function(e){return"".concat(e[0],"=").concat(e[1])})).sort().join("&");E(i,l,e)}()},children:[Object.entries(r[i]).map((function(t,a){var c=Object(I.a)(t,2),o=c[0],u=c[1];return Object(y.jsxs)("div",{children:[Object(y.jsx)("select",{value:o,id:"".concat(o,"-select"),onChange:function(t){return function(t){var n=t.target.id.substring(0,t.target.id.length-7),a=t.target.value,c=r[i];delete c[n],c[a]="",e({type:v.APIActions.setQuery,payload:{path:i,data:c}})}(t)},children:n[s]&&n[s].length>0&&n[s].map((function(e,t){var n=Object.keys(r[i]).includes(e.name)&&o!==e.name;return Object(y.jsx)("option",{disabled:n,id:"".concat(e.name,"-option"),children:e.name},"param-".concat(t))}))}),Object(y.jsx)("input",{type:"text",value:u,onChange:function(t){return function(t){var n=r[i];n[t.target.id.substring(0,t.target.id.length-6)]=t.target.value,e({type:v.APIActions.setQuery,payload:{path:i,data:n}})}(t)},id:"".concat(o,"-input")}),a>0&&Object(y.jsx)("button",{type:"button",id:"".concat(o,"-remove"),onClick:function(t){t.preventDefault(),function(t){var n=t.target.id.substring(0,t.target.id.length-7),a=r[i];delete a[n],e({type:v.APIActions.setQuery,payload:{path:i,data:a}})}(t)},children:"-"})]},"queryItem-".concat(a))})),Object.keys(r[i]).length<n[s].length&&Object(y.jsx)("p",{children:Object(y.jsx)("button",{type:"button",onClick:function(t){t.preventDefault(),function(){var t=n[s].filter((function(e){return!Object.keys(r[i]).includes(e.name)}))[0].name;e({type:v.APIActions.setQuery,payload:{path:i,data:Object(u.a)(Object(u.a)({},r[i]),{},Object(o.a)({},t,""))}})}()},children:"+"})}),Object(y.jsx)("p",{children:Object(y.jsx)("input",{type:"submit",value:"search"})})]})})}var q=n(25),N=n.n(q);function S(e){var t=e.property,n=e.value;if(null===n||0===n.length)return null;if("object"===typeof n)return Object(y.jsx)("div",{className:"resultItem",children:Object(y.jsxs)("details",{children:[Object(y.jsx)("summary",{children:Object(y.jsx)("p",{children:Object(y.jsxs)("span",{className:"label",children:[t,n.name&&" (".concat(n.name,")"),!n.name&&n.title&&" (".concat(n.title,")")]})})}),Object.entries(n).map((function(e,t){var n=Object(I.a)(e,2),a=n[0],c=n[1];return null===c?null:Object(y.jsx)(S,{property:a,value:c},"".concat(a,"-").concat(t))}))]})});var a=JSON.stringify(n).replace(/^"(.+)"$/,"$1");return Object(y.jsx)("div",{className:"resultItem",children:Object(y.jsxs)("p",{children:[Object(y.jsx)("span",{className:"label",children:t}),": ",N.a.isURL(a)?Object(y.jsx)("a",{href:a,children:a}):a]})})}n(55);function _(e){var t={url:null};return Object(y.jsxs)("div",{className:"resultCard",children:[Object(y.jsx)("div",{className:"left",children:Object.entries(e.data).map((function(e,n){var a=Object(I.a)(e,2),c=a[0],r=a[1];return"image"===c&&(null===r||void 0===r?void 0:r.length)>0?(t.url=r,null):null===r||0===r.length?null:Object(y.jsx)(S,{property:c,value:r},"".concat(c,"-").concat(n))}))}),null!==t.url&&N.a.isURL(t.url)&&Object(y.jsx)("div",{className:"right",children:Object(y.jsx)("a",{href:t.url,target:"new",children:Object(y.jsx)("img",{src:t.url,alt:""})})})]})}n(172);var w=function(){return Object(y.jsxs)("div",{className:"loadingContainer",children:[Object(y.jsx)("p",{className:"loadingText",children:"...searching..."}),Object(y.jsx)("img",{className:"loadingImage",alt:"rocket flying around",src:"".concat("","/logo150.png")})]})};function T(){var e,t=Object(b.c)((function(e){return e.API.URLParameters})),n=t?"".concat(t.api,"/").concat(t.endpoint):"",a=Object(b.c)((function(e){return e.API.queryResults}));return Object(y.jsxs)(y.Fragment,{children:[a&&a[n]&&(null===(e=a[n].queryResult)||void 0===e?void 0:e.results)&&Object(y.jsx)("div",{className:"queryResults",children:a[n].queryResult.results.map((function(e){return Object(y.jsx)(_,{data:e},e.id)}))}),(!a||!a[n])&&Object(y.jsx)("p",{children:"no data"}),a&&a[n]&&"searching"===a[n].status&&Object(y.jsx)(w,{})]})}var L=function(){var e=Object(b.b)(),t=Object(h.e)("/:api?/:endpoint?");return t.params.query=window.location.search,Object(a.useEffect)((function(){e({type:v.APIActions.setParams,payload:t.params})}),[t,e]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(f,{}),Object(y.jsx)(m,{}),Object(y.jsx)(P,{}),Object(y.jsx)(R,{}),Object(y.jsx)(T,{})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},U=n(58),k=n.n(U),C=Object(s.b)(k()()),D=Object(s.c)(j,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),C);i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(b.a,{store:D,children:Object(y.jsx)(O.a,{children:Object(y.jsx)(L,{})})})}),document.getElementById("root")),Q()},55:function(e,t,n){},63:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){}},[[177,1,2]]]);
//# sourceMappingURL=main.0005e91e.chunk.js.map